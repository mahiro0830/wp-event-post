!function(){"use strict";var e={770:function(e,t){var n=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(r,l){function o(e){try{c(a.next(e))}catch(e){l(e)}}function i(e){try{c(a.throw(e))}catch(e){l(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,i)}c((a=a.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,a,r,l,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return l={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function i(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;l&&(l=0,i[0]&&(o=0)),o;)try{if(n=1,a&&(r=2&i[0]?a.return:i[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,a=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){o.label=i[1];break}if(6===i[0]&&o.label<r[1]){o.label=r[1],r=i;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(i);break}r[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],a=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){var t;this.element=e||null,this.dateElemts=e.querySelectorAll(".p-calendar__date")||[],this.cellElements=e.querySelectorAll(".js-cell")||[],this.yearDisplay=e.querySelector(".js-year")||null,this.monthDisplay=e.querySelector(".js-month")||null,this.year="",this.month="",this.apiPath=(null===(t=e.closest("#mc-calendar"))||void 0===t?void 0:t.getAttribute("data-api-path"))||"",this.loading=!1,this.loadingElement=document.querySelector(".js-loading")||null}return e.prototype.init=function(e,t){void 0===e&&(e=(new Date).getFullYear()),void 0===t&&(t=(new Date).getMonth()+1),this.year=e,this.month=t,this.drawCalendar(this.year,this.month)},e.prototype.drawCalendar=function(e,t){var n=this;void 0===e&&(e=this.year),void 0===t&&(t=this.month),this.loading=!0,this.loadingElement&&(this.loadingElement.style.display="block"),this.year=Number(e),this.month=Number(t);var a=0===new Date(this.year,this.month-1,1).getDay()?6:new Date(this.year,this.month-1,1).getDay()-1,r=new Date(this.year,this.month,0).getDate();this.yearDisplay&&(this.yearDisplay.textContent=String(this.year)),this.monthDisplay&&(this.monthDisplay.textContent=String(this.month)),this.cellElements.length&&this.cellElements.forEach((function(e,t){var n;e&&(t<a||t>=r+a?(n=e.querySelector(".day"))&&(n.textContent=""):(n=e.querySelector(".day"))&&(n.textContent=String(t-a+1)))})),this.cellElements.forEach((function(e){var t=null==e?void 0:e.querySelectorAll(".p-calendar__events-icon"),n=null==e?void 0:e.querySelectorAll(".p-calendar__events-item");null==t||t.forEach((function(e){e.remove()})),null==n||n.forEach((function(e){e.remove()}))})),setTimeout((function(){n.fetchEvents(n.year,n.month).then((function(e){e.forEach((function(e){var t=new Date(e.event_meta.event_start).getDate(),r=n.cellElements[t+a-1],l=null==r?void 0:r.querySelector(".p-calendar__events"),o=null==r?void 0:r.querySelector(".p-calendar__events-icons"),i=null==r?void 0:r.querySelector(".p-calendar__events-list");if(r){var c=e.event_meta.event_icon,s=document.createElement("div");s.classList.add("mc-event-icon");var d=document.createElement("span");if(c){var u=document.createElement("img");s.classList.add("p-calendar__events-icon"),u.src=e.event_meta.event_icon,s.appendChild(d),d.appendChild(u)}null==o||o.appendChild(s);var h=document.createElement("div");h.classList.add("p-calendar__events-item","mc-event-item"),h.textContent=e.title.rendered,null==h||h.setAttribute("data-detail",e.event_meta.event_details);var v=new Date(e.event_meta.event_start),m=v.getFullYear(),p=v.getMonth()+1,f=v.getDate(),y=["日","月","火","水","木","金","土"][v.getDay()];null==h||h.setAttribute("data-date","".concat(m,"年").concat(p,"月").concat(f,"日(").concat(y,")")),null==i||i.appendChild(h);var g=e["mc-event-category"][0];g&&n.fetchTerm("mc-event-category",g).then((function(e){null==s||s.setAttribute("style","background: linear-gradient(to bottom, #"+e.slug+"1A 50%, transparent 50%)"),null==s||s.setAttribute("data-color","#"+e.slug+"1A"),null==s||s.setAttribute("data-color-accent","#"+e.slug),null==l||l.setAttribute("style","background-color: #"+e.slug+"1A")}))}})),n.loading=!1,n.loadingElement&&(n.loadingElement.style.display="none")}))}),100)},e.prototype.fetchEvents=function(e,t){return n(this,void 0,void 0,(function(){var n;return a(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,fetch("".concat(this.apiPath,"/mc-event?event_start_month=").concat(e,"-").concat(t))];case 1:return[4,a.sent().json()];case 2:return[2,a.sent()];case 3:return n=a.sent(),console.error(n),[3,4];case 4:return[2]}}))}))},e.prototype.fetchTerm=function(e,t){return n(this,void 0,void 0,(function(){var n;return a(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,fetch("".concat(this.apiPath,"/").concat(e,"/").concat(t))];case 1:return[4,a.sent().json()];case 2:return[2,a.sent()];case 3:return n=a.sent(),console.error(n),[3,4];case 4:return[2]}}))}))},e}();t.default=r},931:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(770));document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll(".js-calendar")||[],t=document.querySelector(".js-prev")||null,n=document.querySelector(".js-next")||null,a=[];if(e.length){var l=0;if(e.forEach((function(e){if(e)if(l++,a[l]=new r.default(e),1===l)a[l].init();else{var o=a[l-1].year,i=a[l-1].month,c=Number(i)+1===13?1:Number(i)+1,s=Number(i)+1===13?Number(o)+1:Number(o),d=Number(i)-1==0?12:Number(i)-1,u=Number(i)-1==0?Number(o)-1:Number(o);t&&(t.dataset.prevYear=String(u),t.dataset.prevMonth=String(d)),n&&(n.dataset.nextYear=String(s),n.dataset.nextMonth=String(c)),a[l].init(s,c)}})),t&&n){t.addEventListener("click",(function(e){var r=Number(t.getAttribute("data-prev-year")),l=Number(t.getAttribute("data-prev-month")),o=l+1===13?1:l+1,i=l+1===13?r+1:r,c=l-1==0?12:l-1,s=l-1==0?r-1:r;t&&n&&(t.dataset.prevYear=String(s),t.dataset.prevMonth=String(c),n.dataset.nextYear=String(i),n.dataset.nextMonth=String(o),a[2].drawCalendar(a[1].year,a[1].month),a[1].drawCalendar(r,l))})),n.addEventListener("click",(function(e){var r=Number(n.getAttribute("data-next-year")),l=Number(n.getAttribute("data-next-month")),o=l-1==0?12:l-1,i=l-1==0?r-1:r,c=l+1===13?r+1:r,s=l+1===13?1:l+1;t&&n&&(n.dataset.nextYear=String(c),n.dataset.nextMonth=String(s),t.dataset.prevYear=String(i),t.dataset.prevMonth=String(o),a[2].drawCalendar(c,s),a[1].drawCalendar(r,l))}));var o=document.getElementById("mc-calendar-modal")||null,i=document.getElementById("mc-calendar-modal-close")||null,c=document.querySelectorAll(".js-calendar-link")||[];(o||i||c.length)&&(c.forEach((function(e){null==e||e.addEventListener("click",(function(t){t.preventDefault();var n=(null==e?void 0:e.querySelectorAll(".mc-event-item"))||[],a=(null==e?void 0:e.querySelectorAll(".mc-event-icon"))||[];if(n.length&&a.length){var r=(null==o?void 0:o.querySelector("#mc-calendar-modal-contents"))||null;r&&(r.innerHTML="",n.forEach((function(e,t){var n=(null==e?void 0:e.dataset.date)||"",l=(null==e?void 0:e.textContent)||"",o=(null==e?void 0:e.dataset.detail)||"",i=a[t].cloneNode(!0),c=(null==i?void 0:i.dataset.color)||null,s=(null==i?void 0:i.dataset.colorAccent)||null,d=document.createElement("li");d.classList.add("p-calendar-modal__item");var u=document.createElement("div");u.classList.add("p-calendar-modal__bg"),c&&(u.style.backgroundColor=c),d.appendChild(u);var h=document.createElement("div");h.classList.add("p-calendar-modal__icon"),c&&(h.style.borderColor=c),d.appendChild(h),h.appendChild(i);var v=document.createElement("div");v.classList.add("p-calendar-modal__contents"),d.appendChild(v);var m=document.createElement("div");m.classList.add("p-calendar-modal__date"),m.style.color=s||"",m.textContent=n,v.appendChild(m);var p=document.createElement("div");if(p.classList.add("p-calendar-modal__title"),p.style.color=s||"",p.textContent=l,v.appendChild(p),""!==o){var f=document.createElement("div");f.classList.add("p-calendar-modal__text"),f.textContent=o,v.appendChild(f)}r.appendChild(d)})))}null==o||o.classList.add("is-active")}))})),null==i||i.addEventListener("click",(function(e){e.preventDefault(),null==o||o.classList.remove("is-active")})))}}}))}},t={};!function n(a){var r=t[a];if(void 0!==r)return r.exports;var l=t[a]={exports:{}};return e[a].call(l.exports,l,l.exports,n),l.exports}(931)}();
//# sourceMappingURL=main.js.map